

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Understanding Device IDs &mdash; Syncthing v0.12 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/syncthing.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Syncthing v0.12 documentation" href="../index.html"/>
        <link rel="next" title="Event API" href="events.html"/>
        <link rel="prev" title="Debugging Syncthing" href="debugging.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Syncthing
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/getting-started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/getting-started.html#installing">Installing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/getting-started.html#syncthing">Syncthing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/getting-started.html#configuring">Configuring</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intro/gui.html">An intro to the GUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/gui.html#folder-view">Folder View</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/gui.html#device-view">Device View</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intro/project-presentation.html">Project Presentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/project-presentation.html#syncthing">Syncthing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/project-presentation.html#syncthing-android">syncthing-android</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/project-presentation.html#syncthing-inotify">syncthing-inotify</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/project-presentation.html#syncthing-gtk">Syncthing-GTK</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../users/syncthing.html">Command Line Operation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/syncthing.html#synopsis">Synopsis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/syncthing.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/syncthing.html#options">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/syncthing.html#exit-codes">Exit Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/syncthing.html#development-settings">Development Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/syncthing.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/config.html#synopsis">Synopsis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/config.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/config.html#config-file-format">Config File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/config.html#configuration-element">Configuration Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/config.html#folder-element">Folder Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/config.html#device-element">Device Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/config.html#gui-element">GUI Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/config.html#options-element">Options Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/config.html#syncing-configuration-files">Syncing Configuration files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/faq.html#general">General</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#what-is-syncthing">What is Syncthing?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#is-it-syncthing-syncthing-or-syncthing">Is it “syncthing”, “Syncthing” or “SyncThing”?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#how-does-syncthing-differ-from-bittorrent-sync">How does Syncthing differ from BitTorrent Sync?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../users/faq.html#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#what-things-are-synced">What things are synced?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#is-synchronization-fast">Is synchronization fast?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#should-i-keep-my-device-ids-secret">Should I keep my device IDs secret?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#what-if-there-is-a-conflict">What if there is a conflict?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#how-to-configure-multiple-users-on-a-single-machine">How to configure multiple users on a single machine?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#is-syncthing-my-ideal-backup-application">Is Syncthing my ideal backup application?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#why-is-there-no-ios-client">Why is there no iOS client?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#why-does-it-use-so-much-cpu">Why does it use so much CPU?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#how-can-i-exclude-files-with-brackets-in-the-name">How can I exclude files with brackets (<code class="docutils literal notranslate"><span class="pre">[]</span></code>) in the name?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#why-is-the-setup-more-complicated-than-btsync">Why is the setup more complicated than BTSync?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#how-do-i-access-the-web-gui-from-another-computer">How do I access the web GUI from another computer?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#why-do-i-see-syncthing-twice-in-task-manager">Why do I see Syncthing twice in task manager?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#where-do-syncthing-logs-go-to">Where do Syncthing logs go to?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#how-do-i-upgrade-syncthing">How do I upgrade Syncthing?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/faq.html#where-do-i-find-the-latest-release">Where do I find the latest release?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/firewall.html">Firewall Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/firewall.html#port-forwards">Port Forwards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/firewall.html#local-firewall">Local Firewall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/firewall.html#remote-web-gui">Remote Web GUI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/firewall.html#tunneling-via-ssh">Tunneling via SSH</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/advanced.html">Advanced Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/advanced.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/advanced.html#per-folder-settings">Per Folder Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced/folder-autonormalize.html">autoNormalize</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced/folder-autonormalize.html#background">Background</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced/folder-ignoredelete.html">ignoreDelete</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced/folder-ignoredelete.html#example-scenario">Example Scenario</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/autostart.html">Starting Syncthing Automatically</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/autostart.html#windows">Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/autostart.html#third-party-tools">Third-party Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/autostart.html#start-on-login">Start on Login</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/autostart.html#run-independent-of-user-login">Run independent of user login</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../users/autostart.html#mac-os-x">Mac OS X</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/autostart.html#using-homebrew">Using homebrew</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/autostart.html#without-homebrew">Without homebrew</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../users/autostart.html#linux">Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/autostart.html#on-ubuntu-like-systems">On Ubuntu-like systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/autostart.html#using-supervisord">Using Supervisord</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/autostart.html#using-systemd">Using systemd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../users/autostart.html#how-to-set-up-a-system-service">How to set up a system service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../users/autostart.html#how-to-set-up-a-user-service">How to set up a user service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../users/autostart.html#checking-the-service-status">Checking the service status</a></li>
<li class="toctree-l4"><a class="reference internal" href="../users/autostart.html#using-the-journal">Using the journal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../users/autostart.html#permissions">Permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../users/autostart.html#debugging">Debugging</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/contrib.html">Community Contributions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/contrib.html#gui-wrappers">GUI Wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#cross-platform">Cross-platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#android">Android</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#windows">Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#os-x">OS X</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#kindle-touch">Kindle Touch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../users/contrib.html#packages-and-bundlings">Packages and Bundlings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#debian-ubuntu">Debian / Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#archlinux">ArchLinux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#arkos">arkOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#docker">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#gentoo">Gentoo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#freebsd">FreeBSD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#opensuse">OpenSUSE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#synology-nas">Synology NAS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#qnap-nas">QNAP NAS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../users/contrib.html#integrations">Integrations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#rest-api-bindings">REST API Bindings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#ports">Ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/contrib.html#configuration-management">Configuration management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../users/contrib.html#older-possibly-unmaintained">Older, Possibly Unmaintained</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/custom-upgrades.html">Custom Upgrade Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/custom-upgrades.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/custom-upgrades.html#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/discosrv.html">Running a Discovery Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/discosrv.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/discosrv.html#installing">Installing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/discosrv.html#configuring">Configuring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/discosrv.html#certificates">Certificates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../users/discosrv.html#pointing-syncthing-at-your-discovery-server">Pointing Syncthing at Your Discovery Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/foldermaster.html">Folder Master</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users/ignoring.html">Ignoring Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/ignoring.html#synopsis">Synopsis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/ignoring.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/ignoring.html#patterns">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/ignoring.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/ignoring.html#effects-on-in-sync-status">Effects on “In Sync” Status</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/relaying.html">Relaying</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/relaying.html#security">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/relaying.html#running-your-own-relay">Running Your Own Relay</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/reverseproxy.html">Reverse Proxy Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/reverseproxy.html#server-configuration">Server Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/reverseproxy.html#apache">Apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/reverseproxy.html#nginx">Nginx</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../users/reverseproxy.html#folder-configuration">Folder Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/reverseproxy.html#id2">Apache</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/security.html">Security Principles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/security.html#information-leakage">Information Leakage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/security.html#global-discovery">Global Discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/security.html#local-discovery">Local Discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/security.html#upgrade-checks">Upgrade Checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/security.html#usage-reporting">Usage Reporting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/security.html#sync-connections-bep">Sync Connections (BEP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../users/security.html#web-gui">Web GUI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../users/security.html#in-short">In Short</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users/versioning.html">File Versioning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users/versioning.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/versioning.html#trash-can-file-versioning">Trash Can File Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/versioning.html#simple-file-versioning">Simple File Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/versioning.html#staggered-file-versioning">Staggered File Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users/versioning.html#external-file-versioning">External File Versioning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/versioning.html#example-for-unixes">Example for Unixes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Developers</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#controlling-syncthing-from-external-applications">Controlling Syncthing from External Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#contributing-to-the-syncthing-core">Contributing to the Syncthing Core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="intro.html#source-code-layout">Source Code Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro.html#why-are-you-being-so-hard-on-my-pull-request">Why are you being so hard on my pull request?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="building.html">Building Syncthing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="building.html#branches-and-tags">Branches and Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="building.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="building.html#building-unix">Building (Unix)</a></li>
<li class="toctree-l2"><a class="reference internal" href="building.html#building-windows">Building (Windows)</a></li>
<li class="toctree-l2"><a class="reference internal" href="building.html#subcommands-and-options">Subcommands and Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="building.html#building-without-git">Building without Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="building.html#building-with-docker">Building with Docker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contribution Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#authorship">Authorship</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#team-membership">Team Membership</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#code-review">Code Review</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#coding-style">Coding Style</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#go-specific">Go Specific</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#commits">Commits</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#tests">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#branches">Branches</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#tags">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#licensing">Licensing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging Syncthing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="debugging.html#environment-variables">Environment Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#sttrace">STTRACE</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#stprofiler">STPROFILER</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#stguiassets">STGUIASSETS</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#stcpuprofile">STCPUPROFILE</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#stheapprofile">STHEAPPROFILE</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#stblockprofile">STBLOCKPROFILE</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#stperfstats">STPERFSTATS</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#stnoupgrade">STNOUPGRADE</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#gomaxprocs">GOMAXPROCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#gogc">GOGC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Understanding Device IDs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#keys">Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Device IDs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#connection-establishment">Connection Establishment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#an-aside-about-collisions">An Aside About Collisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#problems-and-vulnerabilities">Problems and Vulnerabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#discovery-spoofing">Discovery Spoofing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#long-device-ids-are-painful">Long Device IDs are Painful</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Event API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="events.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html#event-structure">Event Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html#events">Events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../events/configsaved.html">ConfigSaved</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/deviceconnected.html">DeviceConnected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/devicedisconnected.html">DeviceDisconnected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/devicediscovered.html">DeviceDiscovered</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/devicerejected.html">DeviceRejected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/downloadprogress.html">DownloadProgress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/foldercompletion.html">FolderCompletion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/foldererrors.html">FolderErrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/folderrejected.html">FolderRejected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/foldersummary.html">FolderSummary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/itemfinished.html">ItemFinished</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/itemstarted.html">ItemStarted</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/localindexupdated.html">LocalIndexUpdated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/ping.html">Ping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/remoteindexupdated.html">RemoteIndexUpdated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/starting.html">Starting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/startupcomplete.html">StartupComplete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../events/statechanged.html">StateChanged</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure.html">Syncthing Infrastructure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#github">GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#main-documenatation-websites">Main &amp; Documenatation Websites</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#forum-website">Forum Website</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#global-discovery-servers">Global Discovery Servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#relay-pool-server">Relay Pool Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#relay-servers">Relay Servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#usage-reporting-server">Usage Reporting Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#build-servers-core-and-android">Build Servers, Core and Android</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#osx-and-windows-build-slaves">OSX and Windows Build Slaves</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#apt-server">APT Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html#signing-server">Signing Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="issues.html">Issue Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="issues.html#labels">Labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#milestone">Milestone</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#assignee">Assignee</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#locking">Locking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="jenkins.html">Interacting with Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-creation.html">Creating a Release</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-creation.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-creation.html#process">Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release-schedule.html">Release Schedule</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-schedule.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-schedule.html#patch-releases">Patch Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-schedule.html#minor-releases">Minor Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-schedule.html#major-releases">Major Releases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release-signing.html">Release Signing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-signing.html#checksum-files">Checksum Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-signing.html#binary-signing">Binary Signing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-signing.html#creating-and-verifying-binary-signatures-manually">Creating and Verifying Binary Signatures Manually</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">REST API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rest.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest.html#api-key">API Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest.html#system-endpoints">System Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-config-get.html">GET /rest/system/config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-config-insync-get.html">GET /rest/system/config/insync</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-config-post.html">POST /rest/system/config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-connections-get.html">GET /rest/system/connections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-debug-get.html">GET /rest/system/debug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-debug-post.html">POST /rest/system/debug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-discovery-get.html">GET /rest/system/discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-discovery-post.html">POST /rest/system/discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-error-clear-post.html">POST /rest/system/error/clear</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-error-get.html">GET /rest/system/error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-error-post.html">POST /rest/system/error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-log-get.html">GET /rest/system/log</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-ping-get.html">GET /rest/system/ping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-ping-post.html">POST /rest/system/ping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-reset-post.html">POST /rest/system/reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-restart-post.html">POST /rest/system/restart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-shutdown-post.html">POST /rest/system/shutdown</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-status-get.html">GET /rest/system/status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-upgrade-get.html">GET /rest/system/upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-upgrade-post.html">POST /rest/system/upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/system-version-get.html">GET /rest/system/version</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rest.html#database-endpoints">Database Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-browse-get.html">GET /rest/db/browse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-completion-get.html">GET /rest/db/completion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-file-get.html">GET /rest/db/file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-ignores-get.html">GET /rest/db/ignores</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-ignores-post.html">POST /rest/db/ignores</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-need-get.html">GET /rest/db/need</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-prio-post.html">POST /rest/db/prio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-scan-post.html">POST /rest/db/scan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/db-status-get.html">GET /rest/db/status</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rest.html#statistics-endpoints">Statistics Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rest/stats-device-get.html">GET /rest/stats/device</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/stats-folder-get.html">GET /rest/stats/folder</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rest.html#misc-services-endpoints">Misc Services Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rest/svc-deviceid-get.html">GET /rest/svc/deviceid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/svc-lang-get.html">GET /rest/svc/lang</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rest/svc-report-get.html">GET /rest/svc/report</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Specifications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/bep-v1.html">Block Exchange Protocol v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../specs/bep-v1.html#introduction-and-definitions">Introduction and Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/bep-v1.html#transport-and-authentication">Transport and Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/bep-v1.html#messages">Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../specs/bep-v1.html#cluster-config-type-0">Cluster Config (Type = 0)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#graphical-representation">Graphical Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#fields-clusterconfigmessage">Fields (ClusterConfigMessage)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#fields-folder-structure">Fields (Folder Structure)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#fields-device-structure">Fields (Device Structure)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#xdr">XDR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../specs/bep-v1.html#index-type-1-and-index-update-type-6">Index (Type = 1) and Index Update (Type = 6)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#id1">Graphical Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#fields-index-message">Fields (Index Message)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#fields-fileinfo-structure">Fields (FileInfo Structure)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#id2">XDR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../specs/bep-v1.html#request-type-2">Request (Type = 2)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#id3">Graphical Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#fields">Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#id4">XDR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../specs/bep-v1.html#response-type-3">Response (Type = 3)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#id5">Graphical Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#id6">Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#id7">XDR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../specs/bep-v1.html#ping-type-4">Ping (Type = 4)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/bep-v1.html#close-type-7">Close (Type = 7)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#id8">Graphical Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../specs/bep-v1.html#id9">Fields</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../specs/bep-v1.html#sharing-modes">Sharing Modes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../specs/bep-v1.html#trusted">Trusted</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/bep-v1.html#read-only">Read Only</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../specs/bep-v1.html#message-limits">Message Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/bep-v1.html#example-exchange">Example Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/bep-v1.html#examples-of-strong-cipher-suites">Examples of Strong Cipher Suites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../specs/globaldisco-v3.html">Global Discovery v3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../specs/globaldisco-v3.html#announcements">Announcements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/globaldisco-v3.html#queries">Queries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../specs/localdisco-v3.html">Local Discovery Protocol v3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../specs/localdisco-v3.html#mode-of-operation">Mode of Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/localdisco-v3.html#device-id">Device ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/localdisco-v3.html#announcement-packet">Announcement packet</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../specs/relay-v1.html">Relay Protocol v1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../specs/relay-v1.html#what-is-a-relay">What is a relay?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/relay-v1.html#operation-modes">Operation modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/relay-v1.html#identifying-the-connection-mode">Identifying the connection mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/relay-v1.html#protocol-mode">Protocol mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#permanent-protocol-submode">Permanent protocol submode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#temporary-protocol-submode">Temporary protocol submode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#example-exchange">Example Exchange</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../specs/relay-v1.html#session-mode">Session mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#id1">Example Exchange</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../specs/relay-v1.html#messages">Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#header-structure">Header structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#ping-message-type-0">Ping message (Type = 0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#pong-message-type-1">Pong message (Type = 1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#joinrelayrequest-message-type-2">JoinRelayRequest message (Type = 2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#joinsessionrequest-message-type-3">JoinSessionRequest message (Type = 3)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#response-message-type-4">Response message (Type = 4)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#connectrequest-message-type-5">ConnectRequest message (Type = 5)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specs/relay-v1.html#sessioninvitation-message-type-6">SessionInvitation message (Type = 6)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../specs/relay-v1.html#how-syncthing-uses-relays-and-general-security">How syncthing uses relays, and general security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specs/relay-v1.html#examples-of-strong-cipher-suites">Examples of Strong Cipher Suites</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Syncthing</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Understanding Device IDs</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/syncthing/docs/blob/master/dev/device-ids.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <section id="understanding-device-ids">
<span id="device-ids"></span><h1>Understanding Device IDs<a class="headerlink" href="#understanding-device-ids" title="Permalink to this headline">¶</a></h1>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Every device is identified by a device ID. The device ID is used for address
resolution, authentication and authorization. The term “device ID” could
interchangably have been “key ID” since the device ID is a direct property of
the public key in use.</p>
</section>
<section id="keys">
<h2>Keys<a class="headerlink" href="#keys" title="Permalink to this headline">¶</a></h2>
<p>To understand device IDs we need to look at the underlying mechanisms. At first
startup, Syncthing will create a public/private keypair.</p>
<p>Currently this is a 3072 bit RSA key. The keys are saved in the form of the
private key (<code class="docutils literal notranslate"><span class="pre">key.pem</span></code>) and a self signed certificate (<code class="docutils literal notranslate"><span class="pre">cert.pem</span></code>). The self
signing part doesn’t actually add any security or functionality as far as
Syncthing is concerned but it enables the use of the keys in a standard TLS
exchange.</p>
<p>The typical certificate will look something like this, inspected with
<code class="docutils literal notranslate"><span class="pre">openssl</span> <span class="pre">x509</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Certificate</span><span class="p">:</span>
    <span class="n">Data</span><span class="p">:</span>
        <span class="n">Version</span><span class="p">:</span> <span class="mi">3</span> <span class="p">(</span><span class="mh">0x2</span><span class="p">)</span>
        <span class="n">Serial</span> <span class="n">Number</span><span class="p">:</span> <span class="mi">0</span> <span class="p">(</span><span class="mh">0x0</span><span class="p">)</span>
        <span class="n">Signature</span> <span class="n">Algorithm</span><span class="p">:</span> <span class="n">sha1WithRSAEncryption</span>
        <span class="n">Issuer</span><span class="p">:</span> <span class="n">CN</span><span class="o">=</span><span class="n">syncthing</span>
        <span class="n">Validity</span>
            <span class="n">Not</span> <span class="n">Before</span><span class="p">:</span> <span class="n">Mar</span> <span class="mi">30</span> <span class="mi">21</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">52</span> <span class="mi">2014</span> <span class="n">GMT</span>
            <span class="n">Not</span> <span class="n">After</span> <span class="p">:</span> <span class="n">Dec</span> <span class="mi">31</span> <span class="mi">23</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mi">59</span> <span class="mi">2049</span> <span class="n">GMT</span>
        <span class="n">Subject</span><span class="p">:</span> <span class="n">CN</span><span class="o">=</span><span class="n">syncthing</span>
        <span class="n">Subject</span> <span class="n">Public</span> <span class="n">Key</span> <span class="n">Info</span><span class="p">:</span>
            <span class="n">Public</span> <span class="n">Key</span> <span class="n">Algorithm</span><span class="p">:</span> <span class="n">rsaEncryption</span>
            <span class="n">RSA</span> <span class="n">Public</span> <span class="n">Key</span><span class="p">:</span> <span class="p">(</span><span class="mi">3072</span> <span class="n">bit</span><span class="p">)</span>
                <span class="n">Modulus</span> <span class="p">(</span><span class="mi">3072</span> <span class="n">bit</span><span class="p">):</span>
                    <span class="mi">00</span><span class="p">:</span><span class="n">da</span><span class="p">:</span><span class="mi">83</span><span class="p">:</span><span class="mi">8</span><span class="n">a</span><span class="p">:</span><span class="n">c0</span><span class="p">:</span><span class="mi">95</span><span class="p">:</span><span class="n">af</span><span class="p">:</span><span class="mi">0</span><span class="n">a</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="n">af</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">74</span><span class="p">:</span><span class="mi">65</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="n">f2</span><span class="p">:</span>
                    <span class="mi">30</span><span class="p">:</span><span class="n">e3</span><span class="p">:</span><span class="n">b9</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="n">d2</span><span class="p">:</span><span class="mi">6</span><span class="n">b</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="mi">93</span><span class="p">:</span><span class="n">da</span><span class="p">:</span><span class="mi">0</span><span class="n">b</span><span class="p">:</span><span class="mi">7</span><span class="n">b</span><span class="p">:</span><span class="mi">8</span><span class="n">a</span><span class="p">:</span><span class="mi">1</span><span class="n">e</span><span class="p">:</span><span class="n">e5</span><span class="p">:</span><span class="mi">79</span><span class="p">:</span>
                    <span class="o">...</span>
                    <span class="mi">99</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">4</span><span class="n">c</span><span class="p">:</span><span class="n">a9</span><span class="p">:</span><span class="mi">7</span><span class="n">b</span><span class="p">:</span><span class="n">ba</span><span class="p">:</span><span class="mi">4</span><span class="n">a</span><span class="p">:</span><span class="mi">6</span><span class="n">a</span><span class="p">:</span><span class="mi">8</span><span class="n">b</span><span class="p">:</span><span class="mi">3</span><span class="n">b</span><span class="p">:</span><span class="n">e6</span><span class="p">:</span><span class="n">e7</span><span class="p">:</span><span class="n">c7</span><span class="p">:</span><span class="mi">2</span><span class="n">c</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span>
                    <span class="mi">90</span><span class="p">:</span><span class="n">aa</span><span class="p">:</span><span class="n">bc</span><span class="p">:</span><span class="n">ad</span><span class="p">:</span><span class="mi">94</span><span class="p">:</span><span class="n">e7</span><span class="p">:</span><span class="mi">80</span><span class="p">:</span><span class="mi">95</span><span class="p">:</span><span class="n">d2</span><span class="p">:</span><span class="mi">1</span><span class="n">b</span>
                <span class="n">Exponent</span><span class="p">:</span> <span class="mi">65537</span> <span class="p">(</span><span class="mh">0x10001</span><span class="p">)</span>
        <span class="n">X509v3</span> <span class="n">extensions</span><span class="p">:</span>
            <span class="n">X509v3</span> <span class="n">Key</span> <span class="n">Usage</span><span class="p">:</span> <span class="n">critical</span>
                <span class="n">Digital</span> <span class="n">Signature</span><span class="p">,</span> <span class="n">Key</span> <span class="n">Encipherment</span>
            <span class="n">X509v3</span> <span class="n">Extended</span> <span class="n">Key</span> <span class="n">Usage</span><span class="p">:</span>
                <span class="n">TLS</span> <span class="n">Web</span> <span class="n">Server</span> <span class="n">Authentication</span><span class="p">,</span> <span class="n">TLS</span> <span class="n">Web</span> <span class="n">Client</span> <span class="n">Authentication</span>
            <span class="n">X509v3</span> <span class="n">Basic</span> <span class="n">Constraints</span><span class="p">:</span> <span class="n">critical</span>
                <span class="n">CA</span><span class="p">:</span><span class="n">FALSE</span>
    <span class="n">Signature</span> <span class="n">Algorithm</span><span class="p">:</span> <span class="n">sha1WithRSAEncryption</span>
        <span class="mi">68</span><span class="p">:</span><span class="mi">72</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">8</span><span class="n">b</span><span class="p">:</span><span class="mi">83</span><span class="p">:</span><span class="mi">61</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">68</span><span class="p">:</span><span class="n">f0</span><span class="p">:</span><span class="n">ef</span><span class="p">:</span><span class="n">f0</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="n">b7</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="n">a6</span><span class="p">:</span><span class="mi">73</span><span class="p">:</span><span class="mi">1</span><span class="n">e</span><span class="p">:</span><span class="n">a8</span><span class="p">:</span>
        <span class="n">d9</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">6</span><span class="n">c</span><span class="p">:</span><span class="mi">2</span><span class="n">d</span><span class="p">:</span><span class="n">b4</span><span class="p">:</span><span class="n">bc</span><span class="p">:</span><span class="n">c9</span><span class="p">:</span><span class="n">e8</span><span class="p">:</span><span class="mi">3</span><span class="n">e</span><span class="p">:</span><span class="mi">0</span><span class="n">b</span><span class="p">:</span><span class="mi">1</span><span class="n">e</span><span class="p">:</span><span class="mi">3</span><span class="n">c</span><span class="p">:</span><span class="n">cc</span><span class="p">:</span><span class="mi">7</span><span class="n">a</span><span class="p">:</span><span class="n">b2</span><span class="p">:</span><span class="n">c8</span><span class="p">:</span><span class="n">f1</span><span class="p">:</span><span class="mi">1</span><span class="n">d</span><span class="p">:</span>
        <span class="o">...</span>
        <span class="mi">88</span><span class="p">:</span><span class="mi">7</span><span class="n">e</span><span class="p">:</span><span class="n">e2</span><span class="p">:</span><span class="mi">61</span><span class="p">:</span><span class="n">aa</span><span class="p">:</span><span class="mi">4</span><span class="n">c</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="n">e3</span><span class="p">:</span><span class="mi">64</span><span class="p">:</span><span class="n">b0</span><span class="p">:</span><span class="n">da</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="mi">3</span><span class="n">a</span><span class="p">:</span><span class="n">cd</span><span class="p">:</span><span class="mi">1</span><span class="n">c</span><span class="p">:</span><span class="mi">3</span><span class="n">d</span><span class="p">:</span><span class="mi">86</span><span class="p">:</span><span class="n">db</span><span class="p">:</span>
        <span class="n">df</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="n">b9</span><span class="p">:</span><span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="n">be</span><span class="p">:</span><span class="mi">1</span><span class="n">b</span>
</pre></div>
</div>
<p>We can see here that the certificate is little more than a container for the
public key; the serial number is zero and the Issuer and Subject are both
“syncthing” where a qualified name might otherwise be expected.</p>
<p>An advanced user could replace the <code class="docutils literal notranslate"><span class="pre">key.pem</span></code> and <code class="docutils literal notranslate"><span class="pre">cert.pem</span></code> files with a
keypair generated directly by the <code class="docutils literal notranslate"><span class="pre">openssl</span></code> utility or other mechanism.</p>
</section>
<section id="id1">
<h2>Device IDs<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>To form a device ID the SHA-256 hash of the certificate data in DER form is
calculated. This means the hash covers all information under the
<code class="docutils literal notranslate"><span class="pre">Certificate:</span></code> section above.</p>
<p>The hashing results in a 256 bit hash which we encode using base32. Base32
encodes five bits per character so we need 256 / 5 = 51.2 characters to encode
the device ID. This becomes 52 characters in practice, but 52 characters of
base32 would decode to 260 bits which is not a whole number of bytes. The
base32 encoding adds padding to 280 bits (the next multiple of both 5 and 8
bits) so the resulting ID looks something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MFZWI3DBONSGYYLTMRWGC43ENRQXGZDMMFZWI3DBONSGYYLTMRWA</span><span class="o">====</span>
</pre></div>
</div>
<p>The padding (<code class="docutils literal notranslate"><span class="pre">====</span></code>) is stripped away, the device ID split into four
groups, and <a class="reference external" href="https://forum.syncthing.net/t/v0-9-0-new-device-id-format/478">check
digits</a>
are added for each group. For presentation purposes the device ID is
grouped with dashes, resulting in the final value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MFZWI3D</span><span class="o">-</span><span class="n">BONSGYC</span><span class="o">-</span><span class="n">YLTMRWG</span><span class="o">-</span><span class="n">C43ENR5</span><span class="o">-</span><span class="n">QXGZDMM</span><span class="o">-</span><span class="n">FZWI3DP</span><span class="o">-</span><span class="n">BONSGYY</span><span class="o">-</span><span class="n">LTMRWAD</span>
</pre></div>
</div>
<section id="connection-establishment">
<h3>Connection Establishment<a class="headerlink" href="#connection-establishment" title="Permalink to this headline">¶</a></h3>
<p>Now we know what device IDs are, here’s how they are used in Syncthing. When
you add a device ID to the configuration, Syncthing will attempt to
connect to that device. The first thing we need to do is figure out the IP and
port to connect to. There are three possibilities here:</p>
<ul class="simple">
<li><p>The IP and port can be set statically in the configuration. The IP
can equally well be a host name, so if you have a static IP or a
dynamic DNS setup this might be a good option.</p></li>
<li><p>Using local discovery, if enabled. Every Syncthing instance on a LAN
periodically broadcasts information about itself (device ID, address,
port number). If we’ve seen one of these broadcasts for a given
device ID that’s where we try to connect.</p></li>
<li><p>Using global discovery, if enabled. Every Syncthing instance
announces itself to the global discovery service (device ID and
external port number - the internal address is not announced to the
global server). If we don’t have a static address and haven’t seen
any local announcements the global discovery server will be queried
for an address.</p></li>
</ul>
<p>Once we have an address and port a TCP connection is established and a TLS
handshake performed. As part of the handshake both devices present their
certificates. Once the handshake has completed and the peer certificate is
known, the following steps are performed:</p>
<ol class="arabic simple">
<li><p>Calculate the remote device ID by processing the received certificate as above.</p></li>
<li><p>Weed out a few possible misconfigurations - i.e. if the device ID is
that of the local device or of a device we already have an active
connection to. Drop the connection in these cases.</p></li>
<li><p>Verify the remote device ID against the configuration. If it is not a
device ID we are expecting to talk to, drop the connection.</p></li>
<li><p>Verify the certificate <code class="docutils literal notranslate"><span class="pre">CommonName</span></code> against the configuration. By
default, we expect it to be <code class="docutils literal notranslate"><span class="pre">syncthing</span></code>, but when using custom
certificates this can be changed.</p></li>
<li><p>If everything checks out so far, accept the connection.</p></li>
</ol>
</section>
</section>
<section id="an-aside-about-collisions">
<h2>An Aside About Collisions<a class="headerlink" href="#an-aside-about-collisions" title="Permalink to this headline">¶</a></h2>
<p>The SHA-256 hash is cryptographically collision resistant. This means
that there is no way that we know of to create two different messages
with the same hash.</p>
<p>You can argue that of course there are collisions - there’s an infinite
amount of inputs and a finite amount of outputs - so by definition there
are infinitely many messages that result in the same hash.</p>
<p>I’m going to quote <a class="reference external" href="http://stackoverflow.com/questions/4014090/is-it-safe-to-ignore-the-possibility-of-sha-collisions-in-practice">stack
overflow</a>
here:</p>
<blockquote>
<div><p>The usual answer goes thus: what is the probability that a rogue
asteroid crashes on Earth within the next second, obliterating
civilization-as-we- know-it, and killing off a few billion people ?
It can be argued that any unlucky event with a probability lower
than that is not actually very important.</p>
<p>If we have a “perfect” hash function with output size n, and we have
p messages to hash (individual message length is not important),
then probability of collision is about p2/2n+1 (this is an
approximation which is valid for “small” p, i.e. substantially
smaller than 2n/2). For instance, with SHA-256 (n=256) and one
billion messages (p=10^9) then the probability is about 4.3*10^-60.</p>
<p>A mass-murderer space rock happens about once every 30 million years
on average. This leads to a probability of such an event occurring
in the next second to about 10^-15. That’s 45 orders of magnitude
more probable than the SHA-256 collision. Briefly stated, if you
find SHA-256 collisions scary then your priorities are wrong.</p>
</div></blockquote>
<p>It’s also worth noting that the property of SHA-256 that we are using is not
simply collision resistance but resistance to a preimage attack, i.e. even if
you can find two messages that result in a hash collision that doesn’t help you
attack Syncthing (or TLS in general). You need to create a message that hashes
to exactly the hash that my certificate already has or you won’t get in.</p>
<p>Note also that it’s not good enough to find a random blob of bits that happen to
have the same hash as my certificate. You need to create a valid DER-encoded,
signed certificate that has the same hash as mine. The difficulty of this is
staggeringly far beyond the already staggering difficulty of finding a SHA-256
collision.</p>
</section>
<section id="problems-and-vulnerabilities">
<h2>Problems and Vulnerabilities<a class="headerlink" href="#problems-and-vulnerabilities" title="Permalink to this headline">¶</a></h2>
<p>As far as I know, these are the issues or potential issues with the
above mechanism.</p>
<section id="discovery-spoofing">
<h3>Discovery Spoofing<a class="headerlink" href="#discovery-spoofing" title="Permalink to this headline">¶</a></h3>
<p>Currently, neither the local nor global discovery mechanism is protected
by crypto. This means that any device can in theory announce itself for
any device ID and potentially receive connections for that device.</p>
<p>This could be a denial of service attack (we can’t find the real device
for a given device ID, so can’t connect to it and sync). It could also
be an intelligence gathering attack; if I spoof a given ID, I can see
which devices try to connect to it.</p>
<p>It could be mitigated in several ways:</p>
<ul class="simple">
<li><p>Announcements could be signed by the device private key. This
requires already having the public key to verify.</p></li>
<li><p>Announcements to the global announce server could be done using TLS,
so the server calculates the device ID based on the certificate
instead of trusting the device to tell the truth.</p></li>
<li><p>The user could statically configure IP or host name for the devices.</p></li>
<li><p>The user could run a trusted global server.</p></li>
</ul>
<p>It’s something we might want to look at at some point, but not a huge
problem as I see it.</p>
</section>
<section id="long-device-ids-are-painful">
<h3>Long Device IDs are Painful<a class="headerlink" href="#long-device-ids-are-painful" title="Permalink to this headline">¶</a></h3>
<p>It’s a mouthful to read over the phone, annoying to type into an SMS or even
into a computer. And it needs to be done twice, once for each side.</p>
<p>This isn’t a vulnerability as such, but a user experience problem. There are
various possible solutions:</p>
<ul class="simple">
<li><p>Use shorter device IDs with verification based on the full ID (“You
entered MFZWI3; I found and connected to a device with the ID
MFZWI3-DBONSG-YYLTMR-WGC43E-NRQXGZ-DMMFZW-I3DBON-SGYYLT-MRWA, please
confirm that this is correct”).</p></li>
<li><p>Use shorter device IDs with an out of band authentication, a la
Bluetooth pairing. You enter a one time PIN into Syncthing and give
that PIN plus a short device ID to another user. On initial connect,
both sides verify that the other knows the correct PIN before
accepting the connection.</p></li>
</ul>
</section>
</section>
</section>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="events.html" class="btn btn-neutral float-right" title="Event API" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="debugging.html" class="btn btn-neutral" title="Debugging Syncthing" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      Last updated on Jan 30, 2022.
    </p>
  </div>

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v0.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/version_redirect.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>