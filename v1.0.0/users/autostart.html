

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.18. Starting Syncthing Automatically &mdash; Syncthing v1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/syncthing.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Syncthing v1 documentation" href="../index.html"/>
        <link rel="up" title="2. Usage" href="index.html"/>
        <link rel="next" title="2.19. Community Contributions" href="contrib.html"/>
        <link rel="prev" title="2.17. Custom Upgrade Server" href="custom-upgrades.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Syncthing
          

          
          </a>

          
            
            
              <div class="version">
                v1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">2. Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="syncthing.html">2.1. Command Line Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">2.2. FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html">2.3. Release Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">2.4. Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html">2.5. Advanced Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="foldertypes.html">2.6. Folder Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="introducer.html">2.7. Introducer Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="guilisten.html">2.8. The GUI Listen Address</a></li>
<li class="toctree-l2"><a class="reference internal" href="syncing.html">2.9. Understanding Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall.html">2.10. Firewall Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="relaying.html">2.11. Relaying</a></li>
<li class="toctree-l2"><a class="reference internal" href="proxying.html">2.12. Using Proxies</a></li>
<li class="toctree-l2"><a class="reference internal" href="ignoring.html">2.13. Ignoring Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="versioning.html">2.14. File Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="stdiscosrv.html">2.15. Syncthing Discovery Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="strelaysrv.html">2.16. Syncthing Relay Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom-upgrades.html">2.17. Custom Upgrade Server</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.18. Starting Syncthing Automatically</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#windows">2.18.1. Windows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#task-scheduler">Task Scheduler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#third-party-tools">Third-party Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-on-login">Start on Login</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-as-a-service-independent-of-user-login">Run as a service independent of user login</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#macos">2.18.2. macOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-homebrew">Using homebrew</a></li>
<li class="toctree-l4"><a class="reference internal" href="#without-homebrew">Without homebrew</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#linux">2.18.3. Linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#on-any-distribution-arch-debian-linux-mint-ubuntu-opensuse">On any distribution (Arch, Debian, Linux Mint, Ubuntu, openSUSE)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-supervisord">Using Supervisord</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-systemd">Using systemd</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contrib.html">2.19. Community Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiling.html">2.20. Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="reverseproxy.html">2.21. Reverse Proxy Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">2.22. Security Principles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">3. Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">4. Specifications</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Syncthing</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">2. </span>Usage</a> &raquo;</li>
        
      <li><span class="section-number">2.18. </span>Starting Syncthing Automatically</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/syncthing/docs/blob/master/users/autostart.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="starting-syncthing-automatically">
<h1><span class="section-number">2.18. </span>Starting Syncthing Automatically<a class="headerlink" href="#starting-syncthing-automatically" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This page may be outdated and requires review.</p>
</div>
<p>Jump to configuration for your system:</p>
<ul class="simple">
<li><p><a class="reference external" href="#windows">Windows</a></p></li>
<li><p><a class="reference external" href="#macos">macOS</a></p></li>
<li><p><a class="reference external" href="#linux">Linux</a></p></li>
</ul>
<div class="section" id="windows">
<h2><span class="section-number">2.18.1. </span>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h2>
<p>There is currently no official installer available for Windows. However,
there are a number of easy solutions.</p>
<div class="section" id="task-scheduler">
<h3>Task Scheduler<a class="headerlink" href="#task-scheduler" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Start the <a class="reference external" href="https://en.wikipedia.org/wiki/Windows_Task_Scheduler">Task Scheduler</a> (<code class="docutils literal notranslate"><span class="pre">taskschd.msc</span></code>)</p></li>
<li><p>Create a New Task (“Action” menu -&gt; “Create Task…”)</p></li>
<li><dl class="simple">
<dt>General Tab:</dt><dd><ol class="arabic simple">
<li><p>Name the task (for example ‘Syncthing’)</p></li>
<li><p>Check “Run whether user is logged on or not”</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Triggers Tab:</dt><dd><ol class="arabic simple">
<li><p>Click “New…”</p></li>
<li><p>Set “Begin the task” to “At Startup”</p></li>
<li><p>(optional) choose a delay</p></li>
<li><p>Make sure Enabled is checked</p></li>
<li><p>Click “OK”</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Actions Tab:</dt><dd><ol class="arabic simple">
<li><p>Click “New…”</p></li>
<li><p>[Action] should be set as “Start a program”</p></li>
<li><p>Enter the path to syncthing.exe in “Program/Script”</p></li>
<li><p>(optional) Enter “-no-console -no-browser” for “Add arguments (optional)”</p></li>
<li><p>Click “OK”</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Settings Tab:</dt><dd><ol class="arabic simple">
<li><p>(recommended) Keep the checkbox on “Allow task to be run on demand”</p></li>
<li><p>Clear checkbox from “Stop task if it runs longer than:”</p></li>
<li><p>(recommended) Keep “Do not start a new instance” for “If the task is already running, then the following rule applies”</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>Click OK</p></li>
<li><p>Enter password for the user.</p></li>
</ol>
</div>
<div class="section" id="third-party-tools">
<h3>Third-party Tools<a class="headerlink" href="#third-party-tools" title="Permalink to this headline">¶</a></h3>
<p>There are a number of third-party utilities which aim to address this
issue. These typically provide an installer, let Syncthing start
automatically, and a more polished user experience (e.g. by behaving as
a “proper” Windows application, rather than forcing you to start your
browser to interact with Syncthing).</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contrib.html#contrib-windows"><span class="std std-ref">Windows GUI Wrappers</span></a>, <a class="reference internal" href="contrib.html#contrib-all"><span class="std std-ref">Cross-platform GUI Wrappers</span></a>.</p>
</div>
</div>
<div class="section" id="start-on-login">
<h3>Start on Login<a class="headerlink" href="#start-on-login" title="Permalink to this headline">¶</a></h3>
<p>Starting Syncthing on login, without a console window or browser opening
on start, is relatively easy.</p>
<ol class="arabic simple">
<li><p>Find the correct link of the Windows binary from the <a class="reference external" href="https://github.com/syncthing/syncthing/releases">Syncthing
website</a> (choose
<strong>amd64</strong> if you have a 64-bit version of Windows)</p></li>
<li><p>Extract the files in the folder (<code class="docutils literal notranslate"><span class="pre">syncthing-windows-*</span></code>) in the zip
to the folder <code class="docutils literal notranslate"><span class="pre">C:\syncthing</span></code></p></li>
<li><p>Go to the <code class="docutils literal notranslate"><span class="pre">C:\syncthing</span></code> folder, make a file named
<code class="docutils literal notranslate"><span class="pre">syncthing.bat</span></code></p></li>
<li><p>Right-click the file and choose <strong>Edit</strong>. The file should open in
Notepad or your default text editor.</p></li>
<li><p>Paste the following command into the file and save the changes:
<code class="docutils literal notranslate"><span class="pre">start</span> <span class="pre">&quot;Syncthing&quot;</span> <span class="pre">syncthing.exe</span> <span class="pre">-no-console</span> <span class="pre">-no-browser</span></code></p></li>
<li><p>Right-click on <code class="docutils literal notranslate"><span class="pre">syncthing.bat</span></code> and press “Create Shortcut”</p></li>
<li><p>Right-click the shortcut file <code class="docutils literal notranslate"><span class="pre">syncthing.bat</span> <span class="pre">-</span> <span class="pre">Shortcut</span></code> and click
<strong>Copy</strong></p></li>
<li><p>Click <strong>Start</strong>, click <strong>All Programs</strong>, then click <strong>Startup</strong>.
Right-click on <strong>Startup</strong> then click <strong>Open</strong>.
<img alt="Setup Screenshot" src="../_images/st2.png" /></p></li>
<li><p>Paste the shortcut (right-click in the folder and choose <strong>Paste</strong>,
or press <code class="docutils literal notranslate"><span class="pre">CTRL+V</span></code>)</p></li>
</ol>
<p>Syncthing will now automatically start the next time you open a new Windows session. No
console or browser window will pop-up. Access the interface by browsing
to <a class="reference external" href="http://localhost:8384/">http://localhost:8384/</a></p>
<p>If you prefer slower indexing but a more responsive system during scans,
copy the following command instead of the command in step 5:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start</span> <span class="s2">&quot;Syncthing&quot;</span> <span class="o">/</span><span class="n">low</span> <span class="n">syncthing</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">console</span> <span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">browser</span>
</pre></div>
</div>
</div>
<div class="section" id="run-as-a-service-independent-of-user-login">
<h3>Run as a service independent of user login<a class="headerlink" href="#run-as-a-service-independent-of-user-login" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There are important security considerations with this approach. If you do not
secure Syncthing’s GUI (and REST API), then <strong>any</strong> process running with
<strong>any</strong> permissions can read/write <strong>any</strong> file on your filesystem, by opening
a connection with Syncthing.</p>
<p>Therefore, you <strong>must</strong> ensure that you set a GUI password, or run Syncthing
as an unprivileged user.</p>
</div>
<p>With the above configuration, Syncthing only starts when a user logs on to the machine. This is not optimal on servers where a machine can
run long times after a reboot without anyone logged in. In this case it
is best to create a service that runs as soon as Windows starts. This
can be achieved using NSSM, the “Non-Sucking Service Manager”.</p>
<p>Note that starting Syncthing on login is the preferred approach for
almost any end-user scenario. The only scenario where running Syncthing
as a service makes sense is for (mostly) headless servers, administered
by a sysadmin who knows enough to understand the security implications.</p>
<ol class="arabic simple">
<li><p>Download and extract <a class="reference external" href="http://nssm.cc/download">nssm</a> to a folder where it can stay. The NSSM executable performs administration as well as executing as the Windows service so it will need to be kept in a suitable location.</p></li>
<li><p>From an administrator Command Prompt, CD to the NSSM folder and run <code class="docutils literal notranslate"><span class="pre">nssm.exe</span> <span class="pre">install</span> <span class="pre">&lt;syncthing</span> <span class="pre">service</span> <span class="pre">name&gt;</span></code></p></li>
<li><p>Application Tab</p>
<ul class="simple">
<li><p>Set <em>Path</em> to your <code class="docutils literal notranslate"><span class="pre">syncthing.exe</span></code> and enter <code class="docutils literal notranslate"><span class="pre">-no-restart</span> <span class="pre">-no-browser</span> <span class="pre">-home=&quot;&lt;path</span> <span class="pre">to</span> <span class="pre">your</span> <span class="pre">Syncthing</span> <span class="pre">folder&gt;&quot;</span></code> as Arguments. Note: Logging is set later on. <code class="docutils literal notranslate"><span class="pre">-logfile</span></code> here will not be applied.</p></li>
<li><p><img alt="Windows NSSM Configuration Screenshot" src="../_images/windows-nssm-config.png" /></p></li>
</ul>
</li>
<li><p>Details Tab</p>
<ul class="simple">
<li><p>Optional: Set <em>Startup type</em> to <em>Automatic (Delayed Start)</em> to delay the start of Syncthing when the system first boots, to improve boot speed.</p></li>
</ul>
</li>
<li><p>Log On Tab</p>
<ul class="simple">
<li><p>Enter the user account to run Syncthing as. This user needs to have full access to the Syncthing executable and its parent folder, configuration files / database folder and synced folders. You can leave this as <em>Local System</em> but doing so poses security risks. Setting this to your Windows user account will reduce this; ideally create a dedicated user account with minimal permissions.</p></li>
</ul>
</li>
<li><p>Process Tab</p>
<ul class="simple">
<li><p>Optional: Change priority to <em>Low</em> if you want a more responsive system at the cost of somewhat longer sync time when the system is busy.</p></li>
<li><p>Optional: To enable logging enable “Console window”.</p></li>
</ul>
</li>
<li><p>Shutdown Tab</p>
<ul class="simple">
<li><p>To ensure Syncthing is shut down gracefully select all of the checkboxes and set all <em>Timeouts</em> to <em>10000ms</em>.</p></li>
</ul>
</li>
<li><p>Exit Actions Tab</p>
<ul class="simple">
<li><p>Set <em>Restart Action</em> to <em>Stop service (oneshot mode)</em>. Specific settings are used later for handling Syncthing exits, restarts and upgrades.</p></li>
</ul>
</li>
<li><p>I/O Tab</p>
<ul class="simple">
<li><p>Optional: To enable logging set <em>Output (stdout)</em> to the file desired for logging. The <em>Error</em> field will be automatically set to the same file.</p></li>
</ul>
</li>
<li><p>File Rotation Tab</p>
<ul class="simple">
<li><p>Optional: Set the rotation settings to your preferences.</p></li>
</ul>
</li>
<li><p>Click the <em>Install Service</em> Button</p></li>
<li><p>To ensure that Syncthing exits, restarts and upgrades are handled correctly by the Windows service manager, some final settings are needed. Execute these in the same Command Prompt:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nssm</span> <span class="pre">set</span> <span class="pre">syncthing</span> <span class="pre">AppExit</span> <span class="pre">Default</span> <span class="pre">Exit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nssm</span> <span class="pre">set</span> <span class="pre">syncthing</span> <span class="pre">AppExit</span> <span class="pre">0</span> <span class="pre">Exit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nssm</span> <span class="pre">set</span> <span class="pre">syncthing</span> <span class="pre">AppExit</span> <span class="pre">3</span> <span class="pre">Restart</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nssm</span> <span class="pre">set</span> <span class="pre">syncthing</span> <span class="pre">AppExit</span> <span class="pre">4</span> <span class="pre">Restart</span></code></p></li>
</ul>
</li>
<li><p>Start the service via <code class="docutils literal notranslate"><span class="pre">sc</span> <span class="pre">start</span> <span class="pre">syncthing</span></code> in the Command Prompt.</p></li>
<li><p>Connect to the Syncthing UI, enable HTTPS, and set a secure username and password.</p></li>
</ol>
</div>
</div>
<div class="section" id="macos">
<h2><span class="section-number">2.18.2. </span>macOS<a class="headerlink" href="#macos" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-homebrew">
<h3>Using <a class="reference external" href="https://brew.sh">homebrew</a><a class="headerlink" href="#using-homebrew" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">syncthing</span></code></p></li>
<li><p>Follow the information presented by <code class="docutils literal notranslate"><span class="pre">brew</span></code> to autostart Syncthing using launchctl.</p></li>
</ol>
</div>
<div class="section" id="without-homebrew">
<h3>Without homebrew<a class="headerlink" href="#without-homebrew" title="Permalink to this headline">¶</a></h3>
<p>Download and extract Syncthing for Mac:
<a class="reference external" href="https://github.com/syncthing/syncthing/releases/latest">https://github.com/syncthing/syncthing/releases/latest</a>.</p>
<ol class="arabic simple">
<li><p>Copy the syncthing binary (the file you would open to launch
Syncthing) into a directory called <code class="docutils literal notranslate"><span class="pre">bin</span></code> in your home directory i.e. into /Users/&lt;username&gt;/bin. If
“bin” does not exist, create it.</p></li>
<li><p>Open <code class="docutils literal notranslate"><span class="pre">syncthing.plist</span></code> located in /etc/macosx-launchd. Replace the four occurrences of /Users/USERNAME with your actual home directory location.</p></li>
<li><p>Copy the <code class="docutils literal notranslate"><span class="pre">syncthing.plist</span></code> file to <code class="docutils literal notranslate"><span class="pre">~/Library/LaunchAgents</span></code>. If
you have trouble finding this location select the “Go” menu in Finder
and choose “Go to folder…” and then type
<code class="docutils literal notranslate"><span class="pre">~/Library/LaunchAgents</span></code>. Copying to ~/Library/LaunchAgents will
require admin password in most cases.</p></li>
<li><p>Log out and back in again. Or, if you do not want to log out, you can
run this command in terminal:
<code class="docutils literal notranslate"><span class="pre">launchctl</span> <span class="pre">load</span> <span class="pre">~/Library/LaunchAgents/syncthing.plist</span></code></p></li>
</ol>
<p><strong>Note:</strong> You probably want to turn off “Start Browser” in the web GUI
settings to avoid it opening a browser window on each login. Then, to
access the GUI type 127.0.0.1:8384 (by default) into Safari.</p>
</div>
</div>
<div class="section" id="linux">
<h2><span class="section-number">2.18.3. </span>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h2>
<div class="section" id="on-any-distribution-arch-debian-linux-mint-ubuntu-opensuse">
<h3>On any distribution (Arch, Debian, Linux Mint, Ubuntu, openSUSE)<a class="headerlink" href="#on-any-distribution-arch-debian-linux-mint-ubuntu-opensuse" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Launch the program ‘Startup Applications’.</p></li>
<li><p>Click ‘Add’.</p></li>
<li><p>Fill out the form:</p>
<ul class="simple">
<li><p>Name: Syncthing</p></li>
<li><p>Command: <code class="docutils literal notranslate"><span class="pre">/path/to/syncthing/binary</span> <span class="pre">-no-browser</span> <span class="pre">-home=&quot;/home/your\_user/.config/syncthing&quot;</span></code></p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="using-supervisord">
<h3>Using Supervisord<a class="headerlink" href="#using-supervisord" title="Permalink to this headline">¶</a></h3>
<p>Add the following to your supervisor config file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">program</span><span class="p">:</span><span class="n">syncthing</span><span class="p">]</span>
<span class="n">command</span> <span class="o">=</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">syncthing</span><span class="o">/</span><span class="n">binary</span> <span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">browser</span> <span class="o">-</span><span class="n">home</span><span class="o">=</span><span class="s2">&quot;/home/some_user/.config/syncthing&quot;</span>
<span class="n">directory</span> <span class="o">=</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">some_user</span><span class="o">/</span>
<span class="n">autorestart</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">some_user</span>
<span class="n">environment</span> <span class="o">=</span> <span class="n">STNORESTART</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">HOME</span><span class="o">=</span><span class="s2">&quot;/home/some_user&quot;</span>
</pre></div>
</div>
<p>The file is located at <code class="docutils literal notranslate"><span class="pre">/etc/supervisor/supervisord.conf</span></code> (Debian/Ubuntu) or <code class="docutils literal notranslate"><span class="pre">/etc/supervisord.conf</span></code> .</p>
</div>
<div class="section" id="using-systemd">
<h3>Using systemd<a class="headerlink" href="#using-systemd" title="Permalink to this headline">¶</a></h3>
<p>systemd is a suite of system management daemons, libraries, and
utilities designed as a central management and configuration platform
for the Linux computer operating system. It also offers users the
ability to manage services under the user’s control with a per-user
systemd instance, enabling users to start, stop, enable, and disable
their own units. Service files for systemd are provided by Syncthing and
can be found in
<a class="reference external" href="https://github.com/syncthing/syncthing/tree/master/etc/linux-systemd">etc/linux-systemd</a>.</p>
<p>You have two primary options: You can set up Syncthing as a system service, or a
user service.</p>
<p>Running Syncthing as a system service ensures that Syncthing is run at startup
even if the Syncthing user has no active session. Since the system service keeps
Syncthing running even without an active user session, it is intended to be used
on a <em>server</em>.</p>
<p>Running Syncthing as a user service ensures that Syncthing only starts after the
user has logged into the system (e.g., via the graphical login screen, or ssh).
Thus, the user service is intended to be used on a <em>(multiuser) desktop
computer</em>. It avoids unnecessarily running Syncthing instances.</p>
<p>Several distros (including Arch Linux) ship the needed service files with the
Syncthing package. If your distro provides a systemd service file for Syncthing,
you can skip step 2 when you setting up either the system service or the user
service, as described below.</p>
<div class="section" id="how-to-set-up-a-system-service">
<h4>How to set up a system service<a class="headerlink" href="#how-to-set-up-a-system-service" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p>Create the user who should run the service, or choose an existing one.</p></li>
<li><p>Copy the <code class="docutils literal notranslate"><span class="pre">Syncthing/etc/linux-systemd/system/syncthing&#64;.service</span></code> file into the
<a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Unit%20File%20Load%20Path">load path of the system instance</a>.</p></li>
<li><p>Enable and start the service. Replace “myuser” with the actual Syncthing
user after the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">enable</span> <span class="n">syncthing</span><span class="nd">@myuser</span><span class="o">.</span><span class="n">service</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">syncthing</span><span class="nd">@myuser</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="how-to-set-up-a-user-service">
<h4>How to set up a user service<a class="headerlink" href="#how-to-set-up-a-user-service" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p>Create the user who should run the service, or choose an existing
one. <em>Probably this will be your own user account.</em></p></li>
<li><p>Copy the <code class="docutils literal notranslate"><span class="pre">Syncthing/etc/linux-systemd/user/syncthing.service</span></code> file into the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Unit%20File%20Load%20Path">load path
of the user instance</a>.
To do this without root privileges you can just use this folder under your
home directory: <code class="docutils literal notranslate"><span class="pre">~/.config/systemd/user/</span></code>.</p></li>
<li><p>Enable and start the service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="o">--</span><span class="n">user</span> <span class="n">enable</span> <span class="n">syncthing</span><span class="o">.</span><span class="n">service</span>
<span class="n">systemctl</span> <span class="o">--</span><span class="n">user</span> <span class="n">start</span> <span class="n">syncthing</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="checking-the-service-status">
<h4>Checking the service status<a class="headerlink" href="#checking-the-service-status" title="Permalink to this headline">¶</a></h4>
<p>To check if Syncthing runs properly you can use the <code class="docutils literal notranslate"><span class="pre">status</span></code>
subcommand. To check the status of a system service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">status</span> <span class="n">syncthing</span><span class="nd">@myuser</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>To check the status of a user service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="o">--</span><span class="n">user</span> <span class="n">status</span> <span class="n">syncthing</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-journal">
<h4>Using the journal<a class="headerlink" href="#using-the-journal" title="Permalink to this headline">¶</a></h4>
<p>Systemd logs everything into the journal, so you can easily access Syncthing log
messages. In both of the following examples, <code class="docutils literal notranslate"><span class="pre">-e</span></code> tells the pager to jump to
the very end, so that you see the most recent logs.</p>
<p>To see the logs for the system service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">journalctl</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">u</span> <span class="n">syncthing</span><span class="nd">@myuser</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>To see the logs for the user service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">journalctl</span> <span class="o">-</span><span class="n">e</span> <span class="o">--</span><span class="n">user</span><span class="o">-</span><span class="n">unit</span><span class="o">=</span><span class="n">syncthing</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
</div>
<div class="section" id="permissions">
<h4>Permissions<a class="headerlink" href="#permissions" title="Permalink to this headline">¶</a></h4>
<p>If you enabled the <code class="docutils literal notranslate"><span class="pre">Ignore</span> <span class="pre">Permissions</span></code> option in the Syncthing client’s
folder settings, then you will also need to add the line <code class="docutils literal notranslate"><span class="pre">UMask=0002</span></code> (or any
other <cite>umask setting &lt;http://www.tech-faq.com/umask.html&gt;</cite> you like) in the
<code class="docutils literal notranslate"><span class="pre">[Service]</span></code> section of the <code class="docutils literal notranslate"><span class="pre">syncthing&#64;.service</span></code> file.</p>
</div>
<div class="section" id="debugging">
<h4>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h4>
<p>If you are asked on the bugtracker to start Syncthing with specific
environment variables it will not work the normal way. Systemd isolates each
service and it cannot access global environment variables. The solution is to
add the variables to the service file instead.</p>
<p>To edit the system service, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">edit</span> <span class="n">syncthing</span><span class="nd">@myuser</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>To edit the user service, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="o">--</span><span class="n">user</span> <span class="n">edit</span> <span class="n">syncthing</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>This will create an additional configuration file automatically and you
can define (or overwrite) further service parameters like e.g.
<code class="docutils literal notranslate"><span class="pre">Environment=STTRACE=model</span></code>.</p>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contrib.html" class="btn btn-neutral float-right" title="2.19. Community Contributions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="custom-upgrades.html" class="btn btn-neutral" title="2.17. Custom Upgrade Server" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>