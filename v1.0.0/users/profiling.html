

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.20. Profiling &mdash; Syncthing v1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/syncthing.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Syncthing v1 documentation" href="../index.html"/>
        <link rel="up" title="2. Usage" href="index.html"/>
        <link rel="next" title="2.21. Reverse Proxy Setup" href="reverseproxy.html"/>
        <link rel="prev" title="2.19. Community Contributions" href="contrib.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Syncthing
          

          
          </a>

          
            
            
              <div class="version">
                v1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">2. Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="syncthing.html">2.1. Command Line Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">2.2. FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html">2.3. Release Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">2.4. Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html">2.5. Advanced Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="foldertypes.html">2.6. Folder Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="introducer.html">2.7. Introducer Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="guilisten.html">2.8. The GUI Listen Address</a></li>
<li class="toctree-l2"><a class="reference internal" href="syncing.html">2.9. Understanding Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewall.html">2.10. Firewall Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="relaying.html">2.11. Relaying</a></li>
<li class="toctree-l2"><a class="reference internal" href="proxying.html">2.12. Using Proxies</a></li>
<li class="toctree-l2"><a class="reference internal" href="ignoring.html">2.13. Ignoring Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="versioning.html">2.14. File Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="stdiscosrv.html">2.15. Syncthing Discovery Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="strelaysrv.html">2.16. Syncthing Relay Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom-upgrades.html">2.17. Custom Upgrade Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="autostart.html">2.18. Starting Syncthing Automatically</a></li>
<li class="toctree-l2"><a class="reference internal" href="contrib.html">2.19. Community Contributions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.20. Profiling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enable-debugging">2.20.1. Enable Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#capture-a-cpu-profile">2.20.2. Capture a CPU profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#capture-a-heap-profile">2.20.3. Capture a heap profile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reverseproxy.html">2.21. Reverse Proxy Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">2.22. Security Principles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">3. Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">4. Specifications</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Syncthing</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">2. </span>Usage</a> &raquo;</li>
        
      <li><span class="section-number">2.20. </span>Profiling</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/syncthing/docs/blob/master/users/profiling.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="profiling">
<span id="id1"></span><h1><span class="section-number">2.20. </span>Profiling<a class="headerlink" href="#profiling" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hi! If you’re here because some developer told you to “grab a profile”
and pointed to this page - welcome, and don’t worry! The procedure is
quick and painless.</p>
</div>
<p>Profiling is the process of figuring out what a program is doing – where
it’s spending its time on the CPU and why it’s allocated memory. The
profiles are of two types - the “CPU profile” which shows which functions
are using most CPU time and the “heap profile” that shows which functions
have caused most memory to be allocated.</p>
<p>Neither of the profiles contain any private data about your setup - only
what parts of the program are using resources.</p>
<section id="enable-debugging">
<h2><span class="section-number">2.20.1. </span>Enable Debugging<a class="headerlink" href="#enable-debugging" title="Permalink to this headline">¶</a></h2>
<p>Debugging must be enabled to be able to capture profiles. To enable
debugging, open the advanced settings:</p>
<img alt="../_images/advanced-settings.png" src="../_images/advanced-settings.png" />
<p>Enable the “debugging” setting under “GUI”, and then scroll down and <strong>Save</strong>.
No restart is necessary.</p>
<img alt="../_images/gui-debugging.png" src="../_images/gui-debugging.png" />
</section>
<section id="capture-a-cpu-profile">
<h2><span class="section-number">2.20.2. </span>Capture a CPU profile<a class="headerlink" href="#capture-a-cpu-profile" title="Permalink to this headline">¶</a></h2>
<p>To get a CPU profile you need to visit a URL ending in
<code class="docutils literal notranslate"><span class="pre">/rest/debug/cpuprof</span></code>. Assuming you are on the same computer as Syncthing
and using the default settings, you should be able to do that by just
clicking <a class="reference external" href="http://localhost:8384/rest/debug/cpuprof">http://localhost:8384/rest/debug/cpuprof</a> – otherwise please
adjust the host name and port as necessary.</p>
<p>The profiling starts when the page is requested and takes 30 seconds. During
this time it will seem like nothing is happening and the browser is just
waiting, hung, or “spinning”. Don’t worry - leave it be and have patience.
Once done the profiling will result in a download called something like
<code class="docutils literal notranslate"><span class="pre">syncthing-cpu-windows-amd64-v0.14.4-112233.pprof</span></code>. This is the file to
keep and send in, without modifying the file name as it tells us information
necessary to interpret it.</p>
<p>Repeat the process twice and keep both files.</p>
</section>
<section id="capture-a-heap-profile">
<h2><span class="section-number">2.20.3. </span>Capture a heap profile<a class="headerlink" href="#capture-a-heap-profile" title="Permalink to this headline">¶</a></h2>
<p>To get a heap profile you need to visit a URL ending in
<code class="docutils literal notranslate"><span class="pre">/rest/debug/heapprof</span></code>. The procedure is otherwise identical to the process
for the CPU profile above, except the heap profile is downloaded
instantaneously.</p>
<p>Assuming you are on the same computer as Syncthing
and using the default settings, you should be able to do that by just
clicking <a class="reference external" href="http://localhost:8384/rest/debug/heapprof">http://localhost:8384/rest/debug/heapprof</a> – otherwise please
adjust the host name and port as necessary.</p>
<p>The profiling will result in a download called something like
<code class="docutils literal notranslate"><span class="pre">syncthing-heap-windows-amd64-v0.14.4-112233.pprof</span></code>. This is the file to
keep and send in, without modifying the file name as it tells us information
necessary to interpret it.</p>
<p>Repeat the process twice and keep both files.</p>
</section>
</section>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reverseproxy.html" class="btn btn-neutral float-right" title="2.21. Reverse Proxy Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="contrib.html" class="btn btn-neutral" title="2.19. Community Contributions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>